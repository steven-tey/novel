{"version":3,"sources":["../../../../src/build/webpack/plugins/middleware-plugin.ts"],"names":["getNamedMiddlewareRegex","getModuleBuildInfo","getSortedRoutes","webpack","sources","isMatch","EDGE_RUNTIME_WEBPACK","EDGE_UNSUPPORTED_NODE_APIS","MIDDLEWARE_BUILD_MANIFEST","CLIENT_REFERENCE_MANIFEST","MIDDLEWARE_MANIFEST","MIDDLEWARE_REACT_LOADABLE_MANIFEST","NEXT_CLIENT_SSR_ENTRY_SUFFIX","SUBRESOURCE_INTEGRITY_MANIFEST","NEXT_FONT_MANIFEST","SERVER_REFERENCE_MANIFEST","traceGlobals","EVENT_BUILD_FEATURE_USAGE","normalizeAppPath","INSTRUMENTATION_HOOK_FILENAME","NextBuildContext","NAME","isUsingIndirectEvalAndUsedByExports","args","moduleGraph","runtime","module","usingIndirectEval","wp","exportsInfo","getExportsInfo","exportName","getUsed","UsageState","Unused","getEntryFiles","entryFiles","meta","opts","files","edgeSSR","isServerComponent","push","sriEnabled","filter","file","startsWith","endsWith","map","replace","hasInstrumentationHook","getCreateAssets","params","compilation","metadataByEntry","assets","middlewareManifest","sortedMiddleware","middleware","functions","version","entrypoint","entrypoints","values","metadata","name","get","page","edgeMiddleware","edgeApiFunction","matcherSource","isAppDir","catchAll","namedRegex","matchers","regexp","originalSource","edgeFunctionDefinition","getFiles","wasm","Array","from","wasmBindings","filePath","assetBindings","regions","Object","keys","RawSource","JSON","stringify","buildWebpackError","message","loc","entryModule","parser","error","compiler","WebpackError","state","current","isInMiddlewareLayer","layer","isNodeJsModule","moduleName","require","builtinModules","includes","isDynamicCodeEvaluationAllowed","fileName","middlewareConfig","rootDir","unstable_allowDynamicGlobs","buildUnsupportedApiError","apiName","rest","start","line","registerUnsupportedApiHooks","expression","warnForUnsupportedApi","node","warnings","hooks","call","for","tap","callMemberChain","expressionMemberChain","warnForUnsupportedProcessApi","callee","getCodeAnalyzer","dev","handleExpression","optimize","InnerGraph","onUsage","used","buildInfo","Set","handleWrapExpression","expr","ConstDependency","dependencies","dep1","range","addPresentationalDependency","dep2","handleWrapWasmCompileExpression","handleWrapWasmInstantiateExpression","handleImport","source","value","importLocByPath","Map","importedModule","toString","set","sourcePosition","identifier","sourceContent","skip","undefined","prefix","new","importCall","import","getExtractMetadata","clear","telemetry","entryName","entry","entries","route","options","entryDependency","getResolvedModule","modules","addEntriesFromDependency","dependency","getModule","add","forEach","includeDependencies","entryMetadata","preferredRegion","ogImageGenerationCount","resource","hasOGImageGeneration","test","util","getEntryRuntime","id","record","eventName","payload","absolutePagePath","config","fileWithDynamicCode","userRequest","errors","join","nextEdgeSSR","nextEdgeMiddleware","nextEdgeApiFunction","nextWasmMiddlewareBinding","nextAssetMiddlewareBinding","conn","getOutgoingConnections","featureName","invocationCount","MiddlewarePlugin","constructor","apply","normalModuleFactory","codeAnalyzer","finishModules","tapPromise","processAssets","stage","Compilation","PROCESS_ASSETS_STAGE_ADDITIONS","SUPPORTED_NATIVE_MODULES","supportedEdgePolyfills","getEdgePolyfilledModules","records","mod","handleWebpackExternalForEdgeRuntime","request","context","contextInfo","getResolve","issuerLayer","has"],"mappings":"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"}