{"version":3,"sources":["../../../src/lib/eslint/runLintCheck.ts"],"names":["promises","fs","chalk","path","findUp","semver","CommentJson","formatResults","writeDefaultConfig","hasEslintConfiguration","writeOutputFile","ESLINT_PROMPT_VALUES","existsSync","findPagesDir","installDependencies","hasNecessaryDependencies","Log","isError","getProperError","getPkgManager","VALID_SEVERITY","isValidSeverity","severity","includes","requiredPackages","file","pkg","exportsRestrict","cliPrompt","console","log","bold","cyan","cliSelect","Promise","resolve","require","default","value","values","valueRenderer","title","recommended","selected","name","underline","yellow","unselected","config","lint","baseDir","lintDirs","eslintrcFile","pkgJsonPath","hasAppDir","lintDuringBuild","eslintOptions","reportErrorsOnly","maxWarnings","formatter","outputFile","mod","ESLint","deps","packageManager","missing","some","dep","error","resolved","get","eslintVersion","version","CLIEngine","lt","red","options","useEslintrc","baseConfig","errorOnUnmatchedPattern","extensions","cache","eslint","nextEslintPluginIsEnabled","nextRulesEnabled","Map","configFile","completeConfig","calculateConfigForFile","plugins","Object","entries","rules","startsWith","length","set","pagesDir","pagesDirRules","updatedPagesDir","rule","replace","warn","lintStart","process","hrtime","results","lintFiles","selectedFormatter","fix","outputFixes","getErrorResults","loadFormatter","formattedResult","format","lintEnd","totalWarnings","reduce","sum","warningCount","output","outputWithMessages","eventInfo","durationInSeconds","lintedFilesCount","lintFix","nextEslintPluginVersion","has","join","dirname","nextEslintPluginErrorsCount","totalNextPluginErrorCount","nextEslintPluginWarningsCount","totalNextPluginWarningCount","fromEntries","err","message","runLintCheck","opts","strict","cwd","packageJsonConfig","pkgJsonContent","readFile","encoding","parse","exists","emptyPkgJsonConfig","emptyEslintrc","selectedConfig","find","opt","ready"],"mappings":"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"}